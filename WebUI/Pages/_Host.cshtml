@page "/"
@using OraEmp.Application.Common
@using Serilog
@namespace OraEmp.WebUI.Pages
@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers
@* This code gets executed only when we have a request, so we can capctreu the http context here *@
@{
    Layout = "_Layout";
    //state.isAuthenticated = HttpContext.User.Identity.IsAuthenticated;
    var state = new InitialApplicationState();
    state.Username = HttpContext.User.Identity.Name;
    state.RemoteIpAddress = HttpContext.Connection.RemoteIpAddress.ToString();
    state.LocalPort = HttpContext.Connection.LocalPort.ToString();
    state.RemotePort = HttpContext.Connection.RemotePort.ToString();
    state.UserAgent = HttpContext.Request.Headers.UserAgent.ToString();
    HttpContext.Request.Headers.TryGetValue("UserAgent", out var ret);
    state.Test = ret.ToString();
}

@*
<component type="typeof(App)" render-mode="ServerPrerendered"/>
*@



<component type="typeof(App)" param-InitialState="state" render-mode="Server"/>


