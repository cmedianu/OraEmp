@page "/"
@using OraEmp.Application.Common
@using Serilog
@namespace OraEmp.WebUI.Pages
@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers
@* This code gets executed only when we have a request, so we can capctreu the http context here *@
@{
    Layout = "_Layout";
    var state = new InitialApplicationState
    {
        Username = HttpContext.User.Identity.Name,
        RemoteIpAddress = HttpContext.Connection.RemoteIpAddress.ToString(),
        LocalPort = HttpContext.Connection.LocalPort.ToString(),
        RemotePort = HttpContext.Connection.RemotePort.ToString(),
        UserAgent = HttpContext.Request.Headers.UserAgent.ToString()
    };
    HttpContext.Request.Headers.TryGetValue("UserAgent", out var ret);
    state.Test = ret.ToString();
}

<component type="typeof(App)" param-InitialState="state" render-mode="ServerPrerendered"/>

@*
Needed for SessionStorage
<component type="typeof(App)" param-InitialState="state" render-mode="Server"/>
*@

